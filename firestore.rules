/**
 * This ruleset is for the 'Fabrics' curtain store application.
 *
 * Core Philosophy:
 * With the removal of user authentication, the security model is simplified. All data
 * is either public or write-only. There is no concept of user ownership.
 *
 * Data Structure:
 * - /curtains: A public collection for the product catalog.
 * - /contact_form_entries: A write-only collection for public contact form submissions.
 *
 * Key Security Decisions:
 * - Public Catalog: The `/curtains` collection is publicly readable by anyone. Writes are
 *   disabled, assuming they will be managed by an admin process outside of direct
 *   client access.
 * - Write-Only Contact Form: The `/contact_form_entries` collection allows anyone to submit
 *   an entry but denies all read, update, and delete operations. This protects the privacy
 *   of submitters while allowing the form to function publicly.
 * - Deny by Default: Any operation not explicitly granted is denied.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Publicly readable catalog of curtain products. Writes are disabled.
     * @path /curtains/{curtainId}
     * @allow (get) Any user, signed in or not, can view a specific curtain.
     * @deny (create) All client-side writes are denied.
     */
    match /curtains/{curtainId} {
      allow get, list: if true;
      allow create, update, delete: if false; // All client writes are disabled.
    }

    /**
     * @description Stores submissions from the public contact form.
     * @path /contact_form_entries/{contactFormEntryId}
     * @allow (create) Any user (anonymous or otherwise) can submit the contact form.
     * @deny (get) Reading submissions is denied to protect privacy.
     */
    match /contact_form_entries/{contactFormEntryId} {
      allow create: if true;
      allow get, list, update, delete: if false;
    }
  }
}
